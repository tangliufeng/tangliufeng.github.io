---
layout: post
title: "蓝牙协议框架"
subtitle: ""
date: 2020-10-08
author: "tangliufeng"
header-img: "img/post-bg-2015.jpg"
tags: 
    - BLE
---


# 1. 蓝牙协议框架

蓝牙核心协议（Bluetooth Core）又包含BLE Controller和BLE Host两部分。这两部分在不同的蓝牙技术中（BR/EDR、AMP、LE），承担角色略有不同，但大致的功能是相同的。Controller负责定义RF、Baseband等偏硬件的规范，并在这之上抽象出用于通信的逻辑链路（Logical Link）；Host负责在逻辑链路的基础上，进行更为友好的封装，这样就可以屏蔽掉蓝牙技术的细节，让Bluetooth Application更为方便的使用。

![框架](https://pic4.zhimg.com/80/v2-1c6abc789df13cf86118c49280fa30af_720w.jpg)


- PHY, Physical Layer:
    物理层, 控制无线电信号的收发
- LL, Link Layer:
    链路层, 定义数据包结构, 包括状态信息和收发控制, 以及链路层的加密
- HCI, Host-Controller Interface:
    通过此标准接口, Host层和Controller层进行通讯
- L2CAP, Logical Link Control and Adaptation Protocol: 
    可以理解为一个协议多路复用和分配器(功能上类似于TCPIP的端口) 。一般而言, BLE应用层开发者无需了解L2CAP层的细节
- ATT, Attribute Protocol:
    该协议将单一的数值(信息)以Attribute(属性)的形式抽象出来，并提供一些方法，供远端设备读取和修改
- GATT, Generic Attribute Protocol:
    基于ATT提供的数值, 将有用的数值组打包好, 已服务(service)的方式开放给上层应用. 它相当于提供一套数据打包框架/规则.
- GAP, Generic Access Profile:
    通用访问服务, 是对LL层的广播,监听,建立连接功能的抽象, 便于开发人员来理解和开发
- SM, Security Manager
    负责BLE通信中有关安全的内容.